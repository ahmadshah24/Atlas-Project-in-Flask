{% extends 'base.html' %}
{% block title %}Customers{% endblock title %}
{% block body %}
<div class="container my-5">
    <h2>Customers</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Phone</th>
                <th>Address</th>
                <th>Total Receipt</th>
                <th>Total Sale</th>
                <th>Total Returns</th>
                <th>Reminder</th>
                <th>Controls</th>
            </tr>
        </thead>
        <tbody>
            {% for customer in customers %}
            <tr>
                <td>{{ customer.id }}</td>
                <td>{{ customer.name }}</td>
                <td>{{ customer.phone }}</td>
                <td>{{ customer.address }}</td>
                <td>{{ customer.receipt_total }}</td>
                <td>{{ customer.sale_total }}</td>
                <td>{{ customer.return_total }}</td>
                <td>{{ (customer.sale_total -customer.receipt_total )-customer.return_total }}</td>
                
                <td>
                    <form method="post" action="{{ url_for('delete_customer', customer_id=customer.id) }}" 
                    onsubmit="return confirm('Are you sure you want to delete this customer?');">
                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                        <a href="{{ url_for('edit_customer', customer_id=customer.id) }}" class="btn btn-primary btn-sm">Update</a>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="button" class="btn btn-primary" id="addCustomerBtn">Add Customer</button>
</div>

<!-- The form to add a new customer (hidden by default) -->
<div class="container my-5" id="customerFormContainer" style="display: none;">
    <h2>Add Customer</h2>
    <form method="post" action="{{ url_for('add_customer') }}">
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="phone">Phone</label>
            <input type="tel" class="form-control" id="phone" name="phone" required>
        </div>
        <div class="form-group">
            <label for="address">Address</label>
            <input type="text" class="form-control" id="address" name="address" required>
        </div>
        <button type="submit" class="btn btn-primary">Add Customer</button>
    </form>
</div>

<script>
    // JavaScript to show/hide the form when clicking the button
    const addCustomerBtn = document.getElementById('addCustomerBtn');
    const customerFormContainer = document.getElementById('customerFormContainer');

    addCustomerBtn.addEventListener('click', () => {
        customerFormContainer.style.display = 'block';
    });
</script>
{% endblock body %}
